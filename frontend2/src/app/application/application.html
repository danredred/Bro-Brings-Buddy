<mat-card [class]="`application' ${app().closed?'closed':'open'}`" appearance="outlined">
  <mat-card-header>
    <app-user-profile mat-card-avatar [username]="app().about" />

    <mat-card-title>{{app().about}}</mat-card-title>
    <mat-card-subtitle>#{{app().id}}</mat-card-subtitle>
    <mat-card-subtitle>
      {{app().type === 'TOMEMBER'? 'To Member' : 'To Admin'}}
    </mat-card-subtitle>
    <mat-card-subtitle>{{app().created | date }}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content class="card-content">
    <div class="row-contianer">
      <label>Submitter</label>
      <app-user [username]="app().submitter" />
    </div>

    <mat-accordion>
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title> Approvers </mat-panel-title>
          <mat-panel-description>
            <mat-progress-bar
              mode="determinate"
              [value]="approvalPercent()"
            ></mat-progress-bar>
          </mat-panel-description>
        </mat-expansion-panel-header>
        @for (user of app().approvers; track $index) {
        <app-user [username]="user" />
        }
      </mat-expansion-panel>
    </mat-accordion>
  </mat-card-content>
  @if(!app().closed && (isAdmin()||isSubmitter())){
  <mat-card-actions>
    @if(isAdmin()){
    <button
      matButton
      (click)="action.emit({id:app().id,action:(isAproving()?'DEAPROVE':'APROVE')})"
    >
      {{(isAproving())?'❌':'✅'}}
    </button>}
    @if(isSubmitter()){
      <button
      matButton
      (click)="action.emit({id:app().id,action:'CLOSE'})"
    >
      🗑️
    </button>
    }

  </mat-card-actions>
  }
</mat-card>
